<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Funko Pop Collection - Demon Slayer</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            color: white;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        /* Header */
        header {
            text-align: center;
            margin-bottom: 30px;
        }

        h1 {
            font-size: 2.5em;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
            margin-bottom: 10px;
        }

        .stats {
            background: rgba(255,255,255,0.2);
            padding: 15px;
            border-radius: 10px;
            backdrop-filter: blur(10px);
            display: inline-block;
            margin-top: 10px;
        }

        .stats span {
            font-size: 1.2em;
            font-weight: bold;
            color: #ffd700;
        }

        /* Scanner */
        .scanner-section {
            background: rgba(255,255,255,0.1);
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 30px;
            backdrop-filter: blur(10px);
            text-align: center;
        }

        .scanner-input {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin-top: 15px;
            flex-wrap: wrap;
        }

        input[type="number"] {
            padding: 15px;
            font-size: 1.2em;
            border: none;
            border-radius: 10px;
            width: 200px;
            text-align: center;
        }

        .btn-scan {
            padding: 15px 40px;
            font-size: 1.2em;
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            border: none;
            border-radius: 10px;
            color: white;
            cursor: pointer;
            font-weight: bold;
            transition: transform 0.2s;
        }

        .btn-scan:hover {
            transform: scale(1.05);
        }

        .btn-scan:active {
            transform: scale(0.95);
        }

        .message {
            margin-top: 15px;
            padding: 15px;
            border-radius: 10px;
            font-weight: bold;
            display: none;
        }

        .message.success {
            background: rgba(76, 175, 80, 0.8);
            display: block;
        }

        .message.error {
            background: rgba(244, 67, 54, 0.8);
            display: block;
        }

        .message.duplicate {
            background: rgba(255, 152, 0, 0.8);
            display: block;
        }

        /* Collection Grid */
        .collection {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .pop-card {
            background: rgba(255,255,255,0.1);
            border-radius: 15px;
            padding: 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
            backdrop-filter: blur(10px);
        }

        .pop-card:hover {
            transform: translateY(-5px);
            background: rgba(255,255,255,0.2);
        }

        .pop-card.locked {
            opacity: 0.6;
        }

        .pop-image-container {
            width: 100%;
            aspect-ratio: 1;
            border-radius: 10px;
            overflow: hidden;
            background: rgba(0,0,0,0.2);
            position: relative;
            margin-bottom: 10px;
        }

        .pop-image {
            width: 100%;
            height: 100%;
            object-fit: contain;
            transition: filter 0.5s ease;
        }

        .pop-card.locked .pop-image {
            filter: brightness(0) opacity(0.8);
        }

        .lock-icon {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 3em;
            opacity: 0;
            transition: opacity 0.3s;
        }

        .pop-card.locked .lock-icon {
            opacity: 0.9;
        }

        .pop-number {
            font-size: 1.1em;
            font-weight: bold;
            color: #ffd700;
            margin-bottom: 5px;
        }

        .pop-name {
            font-size: 0.9em;
            color: rgba(255,255,255,0.9);
        }

        .pop-card.locked .pop-name {
            color: rgba(255,255,255,0.5);
        }

        .rarity-border {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            border-radius: 15px;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
        }

        .pop-card:not(.locked) .rarity-border {
            opacity: 1;
        }

        .rarity-common { border: 3px solid #9e9e9e; }
        .rarity-rare { border: 3px solid #2196f3; box-shadow: 0 0 20px rgba(33, 150, 243, 0.5); }
        .rarity-legendary { border: 3px solid #ffd700; box-shadow: 0 0 20px rgba(255, 215, 0, 0.7); }

        /* Animation de dÃ©blocage */
        @keyframes unlock {
            0% { transform: scale(1); }
            50% { transform: scale(1.2); }
            100% { transform: scale(1); }
        }

        @keyframes flash {
            0%, 100% { background: rgba(255,255,255,0.1); }
            50% { background: rgba(255,255,255,0.8); }
        }

        .pop-card.unlocking {
            animation: unlock 0.6s ease, flash 0.3s ease;
        }

        /* Modal dÃ©tail */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            z-index: 1000;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 30px;
            border-radius: 20px;
            max-width: 500px;
            width: 100%;
            text-align: center;
            position: relative;
        }

        .modal-close {
            position: absolute;
            top: 10px;
            right: 20px;
            font-size: 2em;
            cursor: pointer;
            color: white;
        }

        .modal-image {
            width: 100%;
            max-width: 300px;
            margin: 20px auto;
            border-radius: 15px;
        }

        .modal-image img {
            width: 100%;
            border-radius: 15px;
        }

        .modal-image.locked img {
            filter: brightness(0) opacity(0.8);
        }

        /* Responsive */
        @media (max-width: 768px) {
            h1 { font-size: 1.8em; }
            .collection { grid-template-columns: repeat(auto-fill, minmax(120px, 1fr)); gap: 15px; }
            .scanner-input { flex-direction: column; align-items: center; }
            input[type="number"], .btn-scan { width: 100%; max-width: 300px; }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>ðŸŽ¯ Collection Funko Pop</h1>
            <p>Demon Slayer</p>
            <div class="stats">
                <span id="progress">0 / 0</span> dÃ©bloquÃ©es
                (<span id="percentage">0%</span>)
            </div>
        </header>

        <!-- Scanner -->
        <div class="scanner-section">
            <h2>ðŸ“¸ Scanner une Funko Pop</h2>
            <p style="opacity: 0.8; margin-top: 10px;">Entre le numÃ©ro inscrit sur la boÃ®te</p>
            <div class="scanner-input">
                <input type="number" id="scanInput" placeholder="Ex: 1532" min="1">
                <button class="btn-scan" onclick="scanPop()">Scanner</button>
            </div>
            <div class="message" id="scanMessage"></div>
        </div>

        <!-- Collection -->
        <div class="collection" id="collection"></div>
    </div>

    <!-- Modal dÃ©tail -->
    <div class="modal" id="modal">
        <div class="modal-content">
            <span class="modal-close" onclick="closeModal()">&times;</span>
            <h2 id="modalTitle"></h2>
            <div class="modal-image" id="modalImageContainer">
                <img id="modalImage" src="" alt="">
            </div>
            <p id="modalNumber"></p>
            <p id="modalSeries"></p>
            <p id="modalRarity"></p>
            <p id="modalStatus"></p>
        </div>
    </div>

    <script>
        // ========================================
        // ðŸ“Š BASE DE DONNÃ‰ES
        // ========================================
        const POPS_DATABASE = [
            { number: 1532, name: "Tanjiro Kamado", series: "Demon Slayer", rarity: "common" },
            { number: 1533, name: "Nezuko Kamado", series: "Demon Slayer", rarity: "rare" },
            { number: 1534, name: "Zenitsu Agatsuma", series: "Demon Slayer", rarity: "common" },
            { number: 1535, name: "Inosuke Hashibira", series: "Demon Slayer", rarity: "rare" },
            { number: 1536, name: "Giyu Tomioka", series: "Demon Slayer", rarity: "legendary" },
            { number: 1537, name: "Shinobu Kocho", series: "Demon Slayer", rarity: "rare" },
            { number: 1538, name: "Kyojuro Rengoku", series: "Demon Slayer", rarity: "legendary" },
            { number: 1539, name: "Tengen Uzui", series: "Demon Slayer", rarity: "rare" },
        ];

        // ========================================
        // ðŸ’¾ GESTION DE LA PROGRESSION
        // ========================================
        function loadProgress() {
            const saved = localStorage.getItem('unlockedPops');
            return saved ? JSON.parse(saved) : [];
        }

        function saveProgress(unlockedPops) {
            localStorage.setItem('unlockedPops', JSON.stringify(unlockedPops));
        }

        let unlockedPops = loadProgress();

        // ========================================
        // ðŸŽ¨ RENDU DE LA COLLECTION
        // ========================================
        function renderCollection() {
            const container = document.getElementById('collection');
            container.innerHTML = '';

            POPS_DATABASE.forEach(pop => {
                const isUnlocked = unlockedPops.includes(pop.number);
                
                const card = document.createElement('div');
                card.className = `pop-card ${isUnlocked ? '' : 'locked'}`;
                card.onclick = () => showDetail(pop.number);

                card.innerHTML = `
                    <div class="pop-image-container">
                        <img class="pop-image" src="${pop.number}.png" alt="${pop.name}" 
                             onerror="this.src='https://via.placeholder.com/150?text=No+Image'">
                        <div class="lock-icon">ðŸ”’</div>
                    </div>
                    <div class="pop-number">#${pop.number}</div>
                    <div class="pop-name">${isUnlocked ? pop.name : '???'}</div>
                    <div class="rarity-border rarity-${pop.rarity}"></div>
                `;

                container.appendChild(card);
            });

            updateStats();
        }

        // ========================================
        // ðŸ“Š MISE Ã€ JOUR DES STATS
        // ========================================
        function updateStats() {
            const total = POPS_DATABASE.length;
            const unlocked = unlockedPops.length;
            const percentage = Math.round((unlocked / total) * 100);

            document.getElementById('progress').textContent = `${unlocked} / ${total}`;
            document.getElementById('percentage').textContent = `${percentage}%`;
        }

        // ========================================
        // ðŸ“¸ SCAN D'UNE POP
        // ========================================
        function scanPop() {
            const input = document.getElementById('scanInput');
            const number = parseInt(input.value);
            const message = document.getElementById('scanMessage');

            // Reset message
            message.className = 'message';
            message.textContent = '';

            // Validation
            if (!number) {
                showMessage('error', 'âš ï¸ Entre un numÃ©ro valide !');
                return;
            }

            const pop = POPS_DATABASE.find(p => p.number === number);

            if (!pop) {
                showMessage('error', `âŒ Funko #${number} non trouvÃ©e dans Demon Slayer`);
                return;
            }

            // VÃ©rification dÃ©blocage
            if (unlockedPops.includes(number)) {
                showMessage('duplicate', `ðŸ” ${pop.name} est dÃ©jÃ  dans ta collection !`);
                return;
            }

            // DÃ‰BLOCAGE !
            unlockPop(number);
            input.value = '';
        }

        function unlockPop(number) {
            const pop = POPS_DATABASE.find(p => p.number === number);
            
            // Ajout Ã  la progression
            unlockedPops.push(number);
            saveProgress(unlockedPops);

            // Animation
            const cards = document.querySelectorAll('.pop-card');
            const index = POPS_DATABASE.findIndex(p => p.number === number);
            const card = cards[index];

            card.classList.add('unlocking');
            setTimeout(() => {
                card.classList.remove('locked', 'unlocking');
                updateStats();
            }, 600);

            // Message
            const rarityEmoji = {
                'common': 'âšª',
                'rare': 'ðŸ”µ',
                'legendary': 'ðŸŸ¡'
            };
            showMessage('success', `${rarityEmoji[pop.rarity]} ${pop.name} dÃ©bloquÃ©(e) !`);
        }

        function showMessage(type, text) {
            const message = document.getElementById('scanMessage');
            message.className = `message ${type}`;
            message.textContent = text;

            setTimeout(() => {
                message.className = 'message';
            }, 3000);
        }

        // ========================================
        // ðŸ” MODAL DÃ‰TAIL
        // ========================================
        function showDetail(number) {
            const pop = POPS_DATABASE.find(p => p.number === number);
            const isUnlocked = unlockedPops.includes(number);
            const modal = document.getElementById('modal');

            document.getElementById('modalTitle').textContent = isUnlocked ? pop.name : '???';
            document.getElementById('modalNumber').textContent = `#${pop.number}`;
            document.getElementById('modalSeries').textContent = pop.series;
            
            const rarityText = {
                'common': 'Commune âšª',
                'rare': 'Rare ðŸ”µ',
                'legendary': 'LÃ©gendaire ðŸŸ¡'
            };
            document.getElementById('modalRarity').textContent = isUnlocked ? rarityText[pop.rarity] : '???';
            document.getElementById('modalStatus').textContent = isUnlocked ? 'âœ… DÃ©bloquÃ©e' : 'ðŸ”’ VerrouillÃ©e';

            const imgContainer = document.getElementById('modalImageContainer');
            const img = document.getElementById('modalImage');
            img.src = `${pop.number}.png`;
            imgContainer.className = isUnlocked ? 'modal-image' : 'modal-image locked';

            modal.classList.add('active');
        }

        function closeModal() {
            document.getElementById('modal').classList.remove('active');
        }

        // Fermer avec Escape
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') closeModal();
        });

        // Fermer en cliquant Ã  l'extÃ©rieur
        document.getElementById('modal').addEventListener('click', (e) => {
            if (e.target.id === 'modal') closeModal();
        });

        // ========================================
        // ðŸš€ SCAN AVEC ENTRÃ‰E
        // ========================================
        document.getElementById('scanInput').addEventListener('keypress', (e) => {
            if (e.key === 'Enter') scanPop();
        });

        // ========================================
        // ðŸŽ¬ INITIALISATION
        // ========================================
        renderCollection();

        // Bouton reset (pour tester)
        console.log('ðŸŽ® Pour rÃ©initialiser : localStorage.clear() puis F5');
    </script>
</body>
                  </html>
